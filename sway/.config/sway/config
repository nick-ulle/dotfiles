# Variables
set $mod Mod4


# Outputs
output eDP-1 pos 0 0   res 2880x1800 scale 2
output eDP-2 pos 0 900 res 2880x1800 scale 2 disable
exec_always fish -c 'set --export DUO_ROTATED false'

# Startup
exec /usr/lib/polkit-kde-authentication-agent-1
output * bg ~/market/a_foggy_landscape_with_trees_and_grass.jpg fill
exec_always autotiling-rs
bar swaybar_command waybar
exec mako

focus_wrapping no

# Restart sway.
bindsym $mod+BackSpace reload
bindsym $mod+Shift+BackSpace restart

bindsym $mod+Delete exit
# bindsym $mod+Delete power-off

bindsym $mod+Escape exec gtklock
bindsym $mod+Shift+Escape exec gtklock; exec systemctl suspend


# Inputs
input type:touchpad {
  dwt enabled
  dwtp enabled
  tap enabled
  tap_button_map lrm
}


# Aesthetics
default_border none
gaps inner 4


# Desktops
workspace {
  1 output eDP-1
  2 output eDP-1
  3 output eDP-1
  4 output eDP-1
  5 output eDP-1
  6 output eDP-2
}

bindsym {
  $mod+Grave workspace 0
  $mod+1 workspace 1
  $mod+2 workspace 2
  $mod+3 workspace 3
  $mod+4 workspace 4
  $mod+5 workspace 5
  $mod+6 workspace 6

  $mod+Shift+Grave move container to workspace 0
  $mod+Shift+1 move container to workspace 1
  $mod+Shift+2 move container to workspace 2
  $mod+Shift+3 move container to workspace 3
  $mod+Shift+4 move container to workspace 4
  $mod+Shift+5 move container to workspace 5
  $mod+Shift+6 move container to workspace 6
}

workspace 1

# Windows

# Focus windows.
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Reorient windows.
# FIXME
# bindsym $mod+Shift+Left \
#   focus left; split vertical; focus right; move left
# bindsym $mod+Shift+Down \
#   focus down; split horizontal; focus up; move down
# bindsym $mod+Shift+Up \
#   focus up; split horizontal; focus down; move up
# bindsym $mod+Shift+Right \
#   focus right; split vertical; focus left; move right

# Swap windows.
bindsym $mod+Control+h \
  mark swap, focus left, swap container with mark swap, \
  focus left, unmark swap
bindsym $mod+Control+j \
  mark swap, focus down, swap container with mark swap, \
  focus down, unmark swap
bindsym $mod+Control+k \
  mark swap, focus up, swap container with mark swap, \
  focus up, unmark swap
bindsym $mod+Control+l \
  mark swap, focus right, swap container with mark swap, \
  focus right, unmark swap

bindsym $mod+Control+Left \
  mark swap, focus left, swap container with mark swap, \
  focus left, unmark swap
bindsym $mod+Control+Down \
  mark swap, focus down, swap container with mark swap, \
  focus down, unmark swap
bindsym $mod+Control+Up \
  mark swap, focus up, swap container with mark swap, \
  focus up, unmark swap
bindsym $mod+Control+Right \
  mark swap, focus right, swap container with mark swap, \
  focus right, unmark swap

# Close focused window.
bindsym $mod+q kill

# Monocle on focused window.

# Fullscreen on focused window.
bindsym $mod+Shift+Space fullscreen toggle

# Floating on focused window.
bindsym $mod+Return floating toggle

# Sticky on focused window.
bindsym $mod+Shift+Return sticky toggle

# Focus previous window.
# FIXME: this is unsupported.

# Resize Mode
# -----------
bindsym $mod+w mode "resize"

mode "resize" {
  bindsym Left focus left; resize shrink width; focus right
  bindsym Down focus down; resize shrink height; focus up
  bindsym Up focus up; resize shrink height; focus down
  bindsym Right focus right; resize shrink width; focus left

  bindsym $mod+w mode "default"
  bindsym Escape mode "default"
}


# Session
bindsym $mod+F1 exec wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindsym $mod+XF86AudioMute \
  exec wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindsym $mod+F2 exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 4%-
bindsym $mod+XF86AudioLowerVolume \
  exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 4%-
bindsym $mod+F3 exec wpctl set-volume -l 1.0 @DEFAULT_AUDIO_SINK@ 4%+
bindsym $mod+XF86AudioRaiseVolume \
  exec wpctl set-volume -l 1.0 @DEFAULT_AUDIO_SINK@ 4%+
# F4 keyboard backlight
bindsym $mod+F5 exec \
  brightnessctl --device intel_backlight set 10%-
bindsym $mod+F6 exec \
  brightnessctl --device intel_backlight set 10%+
# F7 extended display mode
# F8 swap displays
bindsym $mod+F8 exec fish -c 'duo-rotate'
bindsym $mod+F9 exec wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
# F10 bluetooth toggle
# F11 emoji picker
bindsym $mod+F12 exec swaymsg output eDP-2 toggle


# Applications

bindsym $mod+d exec \
  bemenu-run --bottom --prompt "ï„  " \
  --tf "#FFFFFF" --tb "#6666EAFF" \
  --ff "#FFFFFF" --fb "#1B1918FF" \
  --nf "#888888" --nb "#1B1918FF" \
  --af "#888888" --ab "#1B1918FF" \
  --hf "#FFFFFF" --hb "#6666EAFF" \
  --fn "Hack Nerd Font" 12 --ch 19 \
  --line-height 32 --hp 16 # horizontal padding

bindsym $mod+c exec wezterm start -- fish -i -c tmux
bindsym $mod+Shift+c exec wezterm start -- fish -i

bindsym $mod+n exec firefox
bindsym $mod+Shift+n exec chromium

bindsym $mod+f exec nemo

bindsym $mod+s exec slack
